import{_ as p,c as a,a as e,d as n,b as t,w as o,e as i,r as d,o as f}from"./app-CmwWwVtm.js";const u={},m={href:"https://github.com/hideuvpn/android-google-play-store",target:"_blank",rel:"noopener noreferrer"},b={href:"https://play.google.com/store/apps/details?id=com.absinthe.libchecker",target:"_blank",rel:"noopener noreferrer"},g={href:"https://github.com/LibChecker/LibChecker",target:"_blank",rel:"noopener noreferrer"};function v(k,l){const r=d("font"),s=d("ExternalLinkIcon");return f(),a("div",null,[l[25]||(l[25]=e("h2",{id:"推送",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#推送"},[e("span",null,"推送")])],-1)),l[26]||(l[26]=e("p",null,"即手机收到的消息，app在后台留下一个进程，实时联网即可实现推送，但是我们不希望app一直在后台。 所以苹果就有了系统级的推送服务，只要该系统进程在后台，那么app想要推送的消息会先发给苹果服务器，再由苹果的服务器发给用户的手机。是无后台推送，省电、省内存、提升流畅度。 安卓有了推送又和苹果更接近了一点。",-1)),l[27]||(l[27]=e("h2",{id:"fcm",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#fcm"},[e("span",null,"FCM")])],-1)),e("p",null,[l[3]||(l[3]=n("Firebase Cloud Messaging (")),t(r,{color:"ff6699"},{default:o(()=>l[0]||(l[0]=[n("FCM")])),_:1}),l[4]||(l[4]=n(")，国内俗称谷歌推送。 在海外，和苹果推送一样好用；在大陆，苹果有云上贵州。有懂得都懂的原因，以及大陆消费者习惯原因，")),t(r,{color:"ff6699"},{default:o(()=>l[1]||(l[1]=[n("fcm")])),_:1}),l[5]||(l[5]=n("并没有在大陆推广开来。面向大陆的app也没有接入")),t(r,{color:"ff6699"},{default:o(()=>l[2]||(l[2]=[n("fcm")])),_:1}),l[6]||(l[6]=n(",而是介入了定制rom的推送，华米OV都有自己的推送，显然海外app不会接入大陆定制的推送。"))]),l[28]||(l[28]=e("h2",{id:"fcm-启动",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#fcm-启动"},[e("span",null,"FCM 启动！")])],-1)),l[29]||(l[29]=e("p",null,[n("打开手机拨号输入： "),e("code",null,"*#*#426#*#*")],-1)),e("p",null,[l[8]||(l[8]=n("如果没有打开界面则，是国产定制系统阉割了谷歌框架。 按照这个")),e("a",m,[l[7]||(l[7]=n("文档")),t(s)]),l[9]||(l[9]=n("安装谷歌套件。"))]),l[30]||(l[30]=i('<p>Server 显示 <code>Connected</code> 则网络连接成功。 <code>Time connected</code> 是本次连接的时间，每次打开 <em>426</em> 时显示时间越长表示网络连接越稳定。 要确保连接成功即 <code>Server: Connected</code> 否则以下全都是空谈，如果你所在的地区要开代理才能连接上，那还是放弃算了，除非你能接受24小时开代理。</p><p>给这个进程：</p><ul><li>后台上锁。</li><li>电池优化等设置中完全允许后台运行。</li><li>允许自启动。</li></ul><h3 id="检查app-是否介入了-fcm" tabindex="-1"><a class="header-anchor" href="#检查app-是否介入了-fcm"><span>检查app 是否介入了 fcm</span></a></h3>',4)),e("p",null,[l[12]||(l[12]=n("下载app LibChecker ")),e("a",b,[l[10]||(l[10]=n("Google play")),t(s)]),l[13]||(l[13]=n("，")),e("a",g,[l[11]||(l[11]=n("github")),t(s)]),l[14]||(l[14]=n(" 有 ")),l[15]||(l[15]=e("em",null,"Firebase",-1)),l[16]||(l[16]=n(" 就算是接入了。 可以看到安卓微信只接入了fcm，不接入任何一个国产推送，爱舔洋尻，可见张小龙的孝顺。"))]),l[31]||(l[31]=i('<h2 id="一次成功的fcm推送的完整过程" tabindex="-1"><a class="header-anchor" href="#一次成功的fcm推送的完整过程"><span>一次成功的fcm推送的完整过程</span></a></h2><ol><li>该 app 接入了 fcm , 可以在fcm上注册包名</li><li>通知发送给谷歌服务器</li><li>谷歌服务器发送给用户手机</li><li>用户手机弹出通知</li></ol><h3 id="注册包名" tabindex="-1"><a class="header-anchor" href="#注册包名"><span>注册包名</span></a></h3><p>只有注册被墙，日常接受消息可以裸连。 开自启、开通知权限、开全局代理(确保代理play服务和该app)(新版 <em>V2rayNG</em> 把路由设置中最终代理拉到最上面)，然后打开 app 刷几分钟，以及让朋友或小号给你发消息。 在 fcm diagnostics 里 查看有无 app 的包名，如有则是注册成功了。</p><h3 id="试收消息" tabindex="-1"><a class="header-anchor" href="#试收消息"><span>试收消息</span></a></h3><p>关闭app后台，让朋友或小号发送私信。 若直接弹出通知则跳过之后的所有步骤，请享受苹果级推送。 若没弹出通知，则继续观察 fcm diagnostics：</p><h3 id="在-events-中检索重要的字段" tabindex="-1"><a class="header-anchor" href="#在-events-中检索重要的字段"><span>在 <code>EVENTS</code> 中检索重要的字段：</span></a></h3>',7)),e("table",null,[l[24]||(l[24]=e("thead",null,[e("tr",null,[e("th",null,"字段"),e("th",null,"意义")])],-1)),e("tbody",null,[l[20]||(l[20]=e("tr",null,[e("td",null,"Received ~"),e("td",null,"包名成功注册")],-1)),l[21]||(l[21]=e("tr",null,[e("td",null,"No respnse to broadcast ~"),e("td",null,"谷歌服务器没能把这条推送发送到手机")],-1)),l[22]||(l[22]=e("tr",null,[e("td",null,"acked ~"),e("td",null,"表示发来的数据已确认接收无误")],-1)),e("tr",null,[l[19]||(l[19]=e("td",null,"Successfull broadcast to ~",-1)),e("td",null,[t(r,{color:"ff6699"},{default:o(()=>l[17]||(l[17]=[n("成功")])),_:1}),l[18]||(l[18]=n("推送给用户的手机"))])]),l[23]||(l[23]=e("tr",null,[e("td",null,"Failed to broadcast to stopped app ~"),e("td",null,"app自启动没开,不开自启动fcm会认为你不想收到消息")],-1))])]),l[32]||(l[32]=i('<p>没找到 <code>Received</code> 不要紧，有包名就代表注册了。 有 <code>Successfull broadcast to</code> 但是 没有通知。合理，玄学，<s>无解</s>。</p><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结</span></a></h2><p>开自启 开通知权限 开全局代理打开app 试收消息 收不到寄</p><h2 id="总结-1" tabindex="-1"><a class="header-anchor" href="#总结-1"><span>总结</span></a></h2><p>好像什么都没讲</p>',5))])}const x=p(u,[["render",v],["__file","101.fcm.html.vue"]]),C=JSON.parse('{"path":"/series/root/101.fcm.html","title":"fcm 推送","lang":"en-US","frontmatter":{"title":"fcm 推送","date":"2024/11/07","tags":["android"]},"headers":[{"level":2,"title":"推送","slug":"推送","link":"#推送","children":[]},{"level":2,"title":"FCM","slug":"fcm","link":"#fcm","children":[]},{"level":2,"title":"FCM 启动！","slug":"fcm-启动","link":"#fcm-启动","children":[{"level":3,"title":"检查app 是否介入了 fcm","slug":"检查app-是否介入了-fcm","link":"#检查app-是否介入了-fcm","children":[]}]},{"level":2,"title":"一次成功的fcm推送的完整过程","slug":"一次成功的fcm推送的完整过程","link":"#一次成功的fcm推送的完整过程","children":[{"level":3,"title":"注册包名","slug":"注册包名","link":"#注册包名","children":[]},{"level":3,"title":"试收消息","slug":"试收消息","link":"#试收消息","children":[]},{"level":3,"title":"在 EVENTS 中检索重要的字段：","slug":"在-events-中检索重要的字段","link":"#在-events-中检索重要的字段","children":[]}]},{"level":2,"title":"总结","slug":"总结","link":"#总结","children":[]},{"level":2,"title":"总结","slug":"总结-1","link":"#总结-1","children":[]}],"git":{},"filePathRelative":"series/root/101.fcm.md"}');export{x as comp,C as data};
